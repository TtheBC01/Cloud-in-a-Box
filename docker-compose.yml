version: '3.3'
services:
    browser-ide:
        container_name: browser-ide
        volumes:
            - /var/run/docker.sock:/var/run/docker.sock
            - 'browser-ide:/root'
        ports:
            - '8080:8080'
            - '8888:8888'
        image: 'tthebc01/browser-ide:latest'
        networks: 
            - proxy-network
        environment:
            - AUTHP_ADMIN_USER=${AUTHP_ADMIN_USER}
            - AUTHP_ADMIN_SECRET=${AUTHP_ADMIN_SECRET}
            - AUTHP_ADMIN_EMAIL=${AUTHP_ADMIN_EMAIL}
        
    tunnel:
        container_name: argo-tunnel
        image: 'cloudflare/cloudflared:2022.5.1'
        command: tunnel --no-autoupdate run --token ${TUNNEL_TOKEN}
        networks: 
            - proxy-network

volumes:
  browser-ide:
  
networks:
  proxy-network:
    name: proxy-network